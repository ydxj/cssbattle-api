<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CSSBattle API</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      line-height: 1.6;
      color: #333;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
    }
    
    header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 60px 40px;
      text-align: center;
    }
    
    header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    
    header p {
      font-size: 1.1em;
      opacity: 0.9;
    }
    
    main {
      padding: 40px;
    }
    
    section {
      margin-bottom: 40px;
    }
    
    h2 {
      color: #667eea;
      font-size: 1.8em;
      margin-bottom: 20px;
      border-bottom: 2px solid #667eea;
      padding-bottom: 10px;
    }
    
    h3 {
      color: #764ba2;
      font-size: 1.3em;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    
    .endpoint {
      background: #f5f5f5;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin: 15px 0;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    
    .method {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 4px 10px;
      border-radius: 4px;
      margin-right: 10px;
      font-weight: bold;
    }
    
    code {
      background: #f5f5f5;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
    }
    
    .code-block {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      line-height: 1.4;
    }
    
    .example-request {
      background: #e8f4f8;
      border-left: 4px solid #0288d1;
    }
    
    .example-response {
      background: #f0f4e8;
      border-left: 4px solid #558b2f;
    }
    
    .response-json {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 0.85em;
    }
    
    .param {
      background: #fafafa;
      padding: 12px;
      margin: 10px 0;
      border-radius: 4px;
      border-left: 3px solid #764ba2;
    }
    
    .param strong {
      color: #764ba2;
    }
    
    .status-badge {
      display: inline-block;
      padding: 4px 12px;
      border-radius: 4px;
      font-weight: bold;
      margin-right: 10px;
      font-size: 0.9em;
    }
    
    .status-200 {
      background: #c8e6c9;
      color: #2e7d32;
    }
    
    .status-400 {
      background: #ffccbc;
      color: #d84315;
    }
    
    .status-404 {
      background: #ffccbc;
      color: #d84315;
    }
    
    .status-500 {
      background: #ffcdd2;
      color: #c62828;
    }
    
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    
    .feature-card {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
    }
    
    .feature-card h4 {
      color: #667eea;
      margin-bottom: 10px;
    }
    
    footer {
      background: #f5f5f5;
      padding: 20px 40px;
      text-align: center;
      border-top: 1px solid #e0e0e0;
      color: #666;
    }
    
    .try-it {
      background: #e3f2fd;
      border: 1px solid #90caf9;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
    }
    
    .try-it input {
      width: 100%;
      padding: 10px;
      border: 1px solid #90caf9;
      border-radius: 4px;
      font-size: 1em;
      margin-bottom: 10px;
    }
    
    .try-it button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1em;
      font-weight: bold;
    }
    
    .try-it button:hover {
      background: #764ba2;
    }
    
    .try-it-result {
      background: #f5f5f5;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin-top: 15px;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      max-height: 300px;
      overflow-y: auto;
      display: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>âš”ï¸ CSSBattle API</h1>
      <p>Scrape CSSBattle player profiles with ease</p>
    </header>
    
    <main>
      <!-- Getting Started -->
      <section>
        <h2>ğŸš€ Getting Started</h2>
        <p>The CSSBattle API allows you to fetch player profile data from CSSBattle in JSON format. No authentication required!</p>
        
        <div class="feature-grid">
          <div class="feature-card">
            <h4>âœ… Real-time Data</h4>
            <p>Get live player statistics and rankings</p>
          </div>
          <div class="feature-card">
            <h4>âš¡ Fast & Cached</h4>
            <p>1-hour cache for optimal performance</p>
          </div>
          <div class="feature-card">
            <h4>ğŸ”’ Reliable</h4>
            <p>Production-ready API with error handling</p>
          </div>
          <div class="feature-card">
            <h4>ğŸŒ CORS Enabled</h4>
            <p>Use from any frontend application</p>
          </div>
        </div>
      </section>
      
      <!-- API Endpoint -->
      <section>
        <h2>ğŸ“¡ API Endpoint</h2>
        <div class="endpoint">
          <span class="method">GET</span> <code>/api/player/[username]</code>
        </div>
        
        <h3>Parameters</h3>
        <div class="param">
          <strong>username</strong> (required)<br>
          The CSSBattle player username (alphanumeric, hyphens, underscores allowed)
        </div>
      </section>
      
      <!-- Try It Out -->
      <section>
        <h2>ğŸ§ª Try It Out</h2>
        <div class="try-it">
          <input type="text" id="usernameInput" placeholder="Enter a CSSBattle username (e.g., zerhouni)" value="zerhouni">
          <button onclick="fetchPlayer()">Fetch Player Data</button>
          <div class="try-it-result" id="result"></div>
        </div>
      </section>
      
      <!-- Example Request -->
      <section>
        <h2>ğŸ“¨ Example Request</h2>
        <h3>URL</h3>
        <div class="code-block">
GET /api/player/zerhouni
        </div>
        
        <h3>Using cURL</h3>
        <div class="code-block">
curl -X GET "https://your-domain.com/api/player/zerhouni"
        </div>
        
        <h3>Using JavaScript Fetch</h3>
        <div class="code-block">
fetch('/api/player/zerhouni')
  .then(res => res.json())
  .then(data => console.log(data))
        </div>
      </section>
      
      <!-- Example Response -->
      <section>
        <h2>ğŸ“¬ Example Response</h2>
        <div class="example-response">
          <span class="status-badge status-200">200 OK</span>
          <div class="response-json">
{
  "username": "zerhouni",
  "profileUrl": "https://cssbattle.dev/player/zerhouni",
  "streaks": {
    "current": 18,
    "longest": 18
  },
  "battleStats": {
    "globalRank": 6238,
    "targetsPlayed": 36,
    "totalScore": 22960.62
  },
  "dailyTargets": {
    "targetsPlayed": 33,
    "avgMatch": 99.94,
    "avgCharacters": 257
  },
  "versus": {
    "rating": 1200,
    "gamesPlayed": 0,
    "wins": 0
  }
}
          </div>
        </div>
      </section>
      
      <!-- Error Responses -->
      <section>
        <h2>âš ï¸ Error Responses</h2>
        
        <h3>400 - Invalid Username</h3>
        <div class="example-response">
          <span class="status-badge status-400">400 Bad Request</span>
          <div class="response-json">
{
  "error": "Invalid username format",
  "message": "Username can only contain letters, numbers, hyphens, and underscores"
}
          </div>
        </div>
        
        <h3>404 - Player Not Found</h3>
        <div class="example-response">
          <span class="status-badge status-404">404 Not Found</span>
          <div class="response-json">
{
  "error": "Player not found",
  "message": "No player found with username: invalid"
}
          </div>
        </div>
        
        <h3>500 - Server Error</h3>
        <div class="example-response">
          <span class="status-badge status-500">500 Internal Server Error</span>
          <div class="response-json">
{
  "error": "Internal server error",
  "message": "Failed to scrape profile"
}
          </div>
        </div>
      </section>
      
      <!-- Response Fields -->
      <section>
        <h2>ğŸ“Š Response Fields Explained</h2>
        
        <h3>Streaks</h3>
        <div class="param">
          <strong>current</strong> - Current daily streak (in days)<br>
          <strong>longest</strong> - Longest streak achieved (in days)
        </div>
        
        <h3>Battle Stats</h3>
        <div class="param">
          <strong>globalRank</strong> - Player's global rank<br>
          <strong>targetsPlayed</strong> - Total number of targets played<br>
          <strong>totalScore</strong> - Overall score (decimal)
        </div>
        
        <h3>Daily Targets</h3>
        <div class="param">
          <strong>targetsPlayed</strong> - Daily targets played<br>
          <strong>avgMatch</strong> - Average match percentage<br>
          <strong>avgCharacters</strong> - Average characters used
        </div>
        
        <h3>Versus Stats</h3>
        <div class="param">
          <strong>rating</strong> - Current versus rating<br>
          <strong>gamesPlayed</strong> - Total versus games played<br>
          <strong>wins</strong> - Total versus wins
        </div>
      </section>
      
      <!-- Performance -->
      <section>
        <h2>âš¡ Performance</h2>
        <div class="feature-grid">
          <div class="feature-card">
            <h4>First Request</h4>
            <p>5-10 seconds<br>(Browser rendering)</p>
          </div>
          <div class="feature-card">
            <h4>Cached Requests</h4>
            <p>&lt; 100ms<br>(1 hour cache)</p>
          </div>
          <div class="feature-card">
            <h4>Function Timeout</h4>
            <p>15 seconds<br>(Maximum)</p>
          </div>
        </div>
      </section>
      
      <!-- Integration -->
      <section>
        <h2>ğŸ”— Integration Examples</h2>
        
        <h3>React Component</h3>
        <div class="code-block">
import { useEffect, useState } from 'react';<br><br>

function PlayerProfile({ username }) {<br><br>
  â€…â€…â€…â€…â€…â€…â€…const [player, setPlayer] = useState(null);<br>
  â€…â€…â€…â€…â€…â€…â€…const [loading, setLoading] = useState(true);<br><br>

  â€…â€…â€…â€…â€…â€…â€…useEffect(() => {<br>
    â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…fetch(`/api/player/${username}`)<br>
      â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€….then(res => res.json())<br>
      â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€….then(data => {<br>
        â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…setPlayer(data);<br>
        â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…setLoading(false);<br>
      â€…â€…â€…â€…â€…â€…â€…â€…});<br>
  â€…â€…â€…â€…â€…â€…â€…}, [username]);<br><br>

  â€…â€…â€…â€…â€…â€…â€…if (loading) return &lt;div&gt;Loading...&lt;/div&gt;;<br><br>
  
  â€…â€…â€…â€…â€…â€…â€…return (<br>
    â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…&lt;div&gt;<br>
      â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…&lt;h1&gt;{player.username}&lt;/h1&gt;<br>
      â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…&lt;p&gt;Rank: {player.battleStats.globalRank}&lt;/p&gt;<br>
      â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…&lt;p&gt;Score: {player.battleStats.totalScore}&lt;/p&gt;<br>
    â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…â€…&lt;/div&gt;<br>
  â€…â€…â€…â€…â€…â€…â€…â€…);<br>
}
        </div>
      </section>
      
      <!-- Rate Limits -->
      <section>
        <h2>ğŸ“ˆ Best Practices</h2>
        <ul style="margin-left: 20px; margin-bottom: 20px;">
          <li>Cache responses on your end (1 hour minimum)</li>
          <li>Handle errors gracefully with user-friendly messages</li>
          <li>Validate usernames before sending requests</li>
          <li>Respect the 15-second function timeout</li>
          <li>Don't make excessive parallel requests</li>
        </ul>
      </section>
    </main>
    
    <footer>      
      <div style="padding-top: 20px;">
        <p style="font-weight: bold; margin-bottom: 10px; color: #333;">Developed by Zerhouni Omar</p>
        <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
          <a href="https://zerhouniomar.me/" style="color: #667eea; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;" target="_blank">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 4.42 3.58 8 8 8 4.42 0 8-3.58 8-8 0-4.42-3.58-8-8-8zm0 14.5c-3.584 0-6.5-2.916-6.5-6.5S4.416 1.5 8 1.5s6.5 2.916 6.5 6.5-2.916 6.5-6.5 6.5z"/>
              <circle cx="8" cy="8" r="2"/>
            </svg>
            Portfolio
          </a>
          <a href="https://github.com/ydxj" style="color: #333; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;" target="_blank">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            GitHub
          </a>
          <a href="https://www.linkedin.com/in/zerhouni-omar/" style="color: #0077b5; text-decoration: none; display: inline-flex; align-items: center; gap: 5px;" target="_blank">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
              <path d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854V1.146zm4.943 12.248V6.169H2.542v7.225h2.401zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248-.822 0-1.359.54-1.359 1.248 0 .694.521 1.248 1.327 1.248h.016zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016a5.54 5.54 0 0 1 .016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225h2.4z"/>
            </svg>
            LinkedIn
          </a>
        </div>
        <p style="margin-top: 15px; font-size: 0.9em; color: #999;">
          Â© 2026 Zerhouni Omar â€¢ Open Source Project
        </p>
      </div>
    </footer>
  </div>
  
  <script>
    async function fetchPlayer() {
      const username = document.getElementById('usernameInput').value.trim();
      const resultDiv = document.getElementById('result');
      
      if (!username) {
        resultDiv.textContent = 'Please enter a username';
        resultDiv.style.display = 'block';
        return;
      }
      
      resultDiv.textContent = 'Loading...';
      resultDiv.style.display = 'block';
      
      try {
        const response = await fetch(`/api/player/${username}`);
        const data = await response.json();
        resultDiv.textContent = JSON.stringify(data, null, 2);
      } catch (error) {
        resultDiv.textContent = `Error: ${error.message}`;
      }
    }
    
    document.getElementById('usernameInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') fetchPlayer();
    });
  </script>
</body>
</html>
